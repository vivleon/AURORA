{
  "$schema": "https://example.com/aurora/dashboards.schema.json",
  "version": "1.0.0",
  "panels": [
    {
      "id": "overview",
      "title": "Overview",
      "layout": {"w": 24, "h": 8, "x": 0, "y": 0},
      "widgets": [
        {"type": "stat", "id": "kpi_success", "title": "Success Rate", "query": {"endpoint": "/dash/kpi", "params": {"window": "1h"}}, "valuePath": "kpi.success", "format": "percent"},
        {"type": "stat", "id": "kpi_blocked", "title": "Blocked Rate", "query": {"endpoint": "/dash/kpi", "params": {"window": "1h"}}, "valuePath": "kpi.blocked", "format": "percent"},
        {"type": "stat", "id": "kpi_p95", "title": "P95 Latency (ms)", "query": {"endpoint": "/dash/kpi", "params": {"window": "1h"}}, "valuePath": "kpi.p95_ms", "format": "number"},
        {"type": "bar", "id": "consent_actions", "title": "Consent Actions (24h)", "query": {"endpoint": "/dash/consent/timeline", "params": {"window": "24h"}}, "x": "bucket", "series": [
          {"label": "approved", "path": "approved"},
          {"label": "denied", "path": "denied"},
          {"label": "expired", "path": "expired"}
        ]}
      ]
    },
    {
      "id": "performance",
      "title": "Performance",
      "layout": {"w": 24, "h": 12, "x": 0, "y": 9},
      "widgets": [
        {"type": "timeseries", "id": "latency_by_tool", "title": "Latency P95 by Tool (1h)", "query": {"endpoint": "/dash/latency", "params": {"p": 95, "window": "1h"}}, "groupBy": "tool", "yPath": "latency_ms"},
        {"type": "table", "id": "error_topn", "title": "Top Errors (1h)", "query": {"endpoint": "/dash/errors/top", "params": {"window": "1h", "limit": 10}}, "columns": [
          {"field": "tool", "title": "Tool"},
          {"field": "err_code", "title": "Code"},
          {"field": "count", "title": "Count"}
        ]}
      ]
    },
    {
      "id": "security_consent",
      "title": "Security & Consent",
      "layout": {"w": 24, "h": 10, "x": 0, "y": 22},
      "widgets": [
        {"type": "timeline", "id": "consent_timeline", "title": "Consent Timeline (7d)", "query": {"endpoint": "/dash/consent/timeline", "params": {"window": "7d"}}, "timePath": "ts", "labelPath": "decision"},
        {"type": "table", "id": "high_risk_actions", "title": "High-Risk Executions (24h)", "query": {"endpoint": "/dash/highrisk", "params": {"window": "24h"}}, "columns": [
          {"field": "ts", "title": "Time"},
          {"field": "action", "title": "Action"},
          {"field": "decision", "title": "Decision"},
          {"field": "session_id", "title": "Session"}
        ]}
      ]
    },
    {
      "id": "bandit",
      "title": "Bandit Analytics",
      "layout": {"w": 24, "h": 10, "x": 0, "y": 33},
      "widgets": [
        {"type": "line", "id": "bandit_reward_7d", "title": "Avg Reward (7d)", "query": {"endpoint": "/dash/bandit/reward", "params": {"window": "7d"}}, "x": "ts", "y": "avg_reward"},
        {"type": "bar", "id": "bandit_weights", "title": "Tool Weights", "query": {"endpoint": "/dash/bandit/weights", "params": {"window": "7d"}}, "x": "tool", "y": "weight"}
      ]
    },
    {
      "id": "rag_quality",
      "title": "RAG Quality",
      "layout": {"w": 24, "h": 10, "x": 0, "y": 44},
      "widgets": [
        {"type": "stat", "id": "evidence_rate", "title": "Evidence Attachment Rate", "query": {"endpoint": "/dash/rag/quality", "params": {"window": "24h"}}, "valuePath": "evidence_rate", "format": "percent"},
        {"type": "table", "id": "top_chunks", "title": "Top Chunks (Hits)", "query": {"endpoint": "/dash/rag/top-chunks", "params": {"window": "24h", "limit": 20}}, "columns": [
          {"field": "doc", "title": "Document"},
          {"field": "chunk", "title": "Chunk Idx"},
          {"field": "hits", "title": "Hits"}
        ]}
      ]
    }
  ],
  "themes": {
    "dark": {
      "primary": "#89b4fa",
      "accent": "#f38ba8",
      "ok": "#a6e3a1",
      "warn": "#f9e2af",
      "err": "#f38ba8"
    }
  }
}
